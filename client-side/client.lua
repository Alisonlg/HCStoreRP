--[[
  _    _  _____  _____ _                 _____  _____  
 | |  | |/ ____|/ ____| |               |  __ \|  __ \ 
 | |__| | |    | (___ | |_ ___  _ __ ___| |__) | |__) |
 |  __  | |     \___ \| __/ _ \| '__/ _ \  _  /|  ___/ 
 | |  | | |____ ____) | || (_) | | |  __/ | \ \| |     
 |_|  |_|\_____|_____/ \__\___/|_|  \___|_|  \_\_|     
                                                                                             
]]--

local v0=nil;local v1=false;local v2;src={};_G.framework=nil;if (GetResourceState("vrp")~="missing") then local v57=0;local v58;local v59;local v60;while true do if (v57==(0 + 0)) then v58=module("vrp","lib/Proxy");v59=v58.getInterface("vRP");v57=1;end if (v57==(1 -0)) then v60=module("vrp","lib/Tunnel");v60.bindInterface("vrp_hcstore",src);v57=2;end if (v57==(7 -5)) then vSERVER=v60.getInterface("vrp_hcstore");_G.framework="VRP";break;end end elseif (GetResourceState("es_extended")~="missing") then local v68=exports['es_extended']:getSharedObject();_G.framework="ESX";else error("Não foi encontrado vRP, vRPEX ou es_extended em sua base");end function hexToRGB(v4) v4=v4:gsub("#","");if ( #v4~=(448 -(416 + 26))) then error("Formato hexadecimal inválido");end local v5=tonumber(v4:sub(1,6 -4 ),16);local v6=tonumber(v4:sub(3,2 + 2 ),16);local v7=tonumber(v4:sub(8 -3 ,444 -(145 + 293) ),446 -(44 + 386) );return v5,v6,v7;end function sendErrorMessage(v8) local v9=ErrorInput({header="",rows={{id=0 + 0 ,txt=v8}}});Citizen.Wait((3 + 0) * 1000 );local v9=CloseErrorInput({});end function sendCountdown(v10) local v11=CountdownInput({header="",rows={{id=0,txt=v10}}});end function openTestDrive() local v12=0;local v13;while true do if (v12==0) then if (v2==true) then sendErrorMessage(Config.Main.Mensagens.Erros.TestDrive_emteste);return;end v13=DialogInput({header="",rows={{id=0,txt="Categoria",type="select"},{id=1,txt="Carro",type="select"}}});v12=1;end if (v12==(4 -3)) then if (v13~=nil) then if ((v13[1 + 0 ].input~=nil) and (v13[2].input~=nil)) then local v77=0 -0 ;while true do if (v77==(10 -7)) then TestVehicle(vehicleModel,playerPed,pos,heading);SetModelAsNoLongerNeeded(vehicleModel);break;end if (v77==2) then pos=GetEntityCoords(playerPed);heading=Config.Main.TestDrive.Heading;v77=862 -(814 + 45) ;end if (v77==0) then vehicleModel=GetHashKey(v13[4 -2 ].input);RequestModel(vehicleModel);v77=1;end if (v77==(1 + 0)) then while  not HasModelLoaded(vehicleModel) do Citizen.Wait(0);end playerPed=PlayerPedId();v77=2;end end end end break;end end end function DialogInput(v14) Citizen.Wait(150);if  not v14 then return;end if v0 then return;end v0=promise.new();SetNuiFocus(true,true);SendNUIMessage({action="OPEN_MENU",data=v14});return Citizen.Await(v0);end function CategorysInput(v15) if  not v15 then return;end if v0 then return;end SendNUIMessage({action="PUT_CATEGORY",data=v15});end function BalloonInput(v16) Citizen.Wait(54 + 96 );if  not v16 then return;end if v0 then return;end v0=promise.new();SetNuiFocus(false,false);SendNUIMessage({action="OPEN_BALLOON",data=v16});return Citizen.Await(v0);end function CloseBalloonInput() local v17=885 -(261 + 624) ;while true do if (v17==1) then SendNUIMessage({action="CLOSE_BALLOON",data=""});break;end if (v17==(0 -0)) then Citizen.Wait(150);SetNuiFocus(false,false);v17=1081 -(1020 + 60) ;end end end function WebsiteInput(v18) local v19=1423 -(630 + 793) ;while true do if (2==v19) then SetNuiFocus(true,true);SendNUIMessage({action="OPEN_WEBSITE",data=v18});v19=9 -6 ;end if (v19==(4 -3)) then if v0 then return;end v0=promise.new();v19=2;end if (v19==3) then return Citizen.Await(v0);end if (v19==0) then Citizen.Wait(150);if  not v18 then return;end v19=1 + 0 ;end end end function CloseWebsiteInput() Citizen.Wait(516 -366 );SetNuiFocus(false,false);SendNUIMessage({action="CLOSE_WEBSITE",data=""});end function ErrorInput(v20) local v21=1747 -(760 + 987) ;while true do if (1==v21) then SetNuiFocus(false,false);SendNUIMessage({action="OPEN_ERROR",data=v20});break;end if (v21==(1913 -(1789 + 124))) then Citizen.Wait(916 -(745 + 21) );if  not v20 then return;end v21=1 + 0 ;end end end function CloseErrorInput() local v22=0 -0 ;while true do if (v22==(3 -2)) then SendNUIMessage({action="CLOSE_ERROR",data=""});break;end if (v22==0) then Citizen.Wait(2 + 148 );SetNuiFocus(false,false);v22=1 + 0 ;end end end function CountdownInput(v23) Citizen.Wait(1205 -(87 + 968) );if  not v23 then return;end SetNuiFocus(false,false);SendNUIMessage({action="OPEN_COUNTDOWN",data=v23});end function CloseCountdownInput() Citizen.Wait(660 -510 );SetNuiFocus(false,false);SendNUIMessage({action="CLOSE_COUNTDOWN",data=""});end exports("DialogInput",DialogInput);exports("CategorysInput",CategorysInput);exports("BalloonInput",BalloonInput);exports("CloseBalloonInput",CloseBalloonInput);exports("WebsiteInput",WebsiteInput);exports("CloseWebsiteInput",CloseWebsiteInput);exports("ErrorInput",ErrorInput);exports("CloseErrorInput",CloseErrorInput);exports("CountdownInput",CountdownInput);exports("CloseCountdownInput",CloseCountdownInput);function ShowAboveRadarMessage(v24) SetNotificationTextEntry("STRING");AddTextComponentString(v24);DrawNotification(0 + 0 , -1);end RegisterNUICallback("buttonSubmit",function(v25,v26) SetNuiFocus(false);if v0 then v0:resolve(v25.data);end v0=nil;v26("ok");end);RegisterNUICallback("closeMenu",function(v27,v28) local v29=0 -0 ;while true do if (v29==(1413 -(447 + 966))) then SetNuiFocus(false);if v0 then v0:resolve(nil);end v29=2 -1 ;end if (v29==1) then v0=nil;v28("ok");break;end end end);function TestVehicle(v30,v31,v32,v33) v2=true;anteriorCoords=GetEntityCoords(v31);anteriorHeading=GetEntityHeading(v31);ped=PlayerPedId();DoScreenFadeOut(2317 -(1703 + 114) );Citizen.Wait(500);vehicle=CreateVehicle(v30,v32.x,v32.y,v32.z,v33,true,false);FreezeEntityPosition(vehicle,false);SetEntityVisible(ped,false);SetEntityVisible(vehicle,false);Citizen.CreateThread(function() while true do local v66=701 -(376 + 325) ;while true do if (v66==(1 -0)) then Citizen.Wait(0);break;end if (v66==0) then SetPlayerVisibleLocally(ped,true);SetEntityLocallyVisible(vehicle,true);v66=2 -1 ;end end end end);SetEntityCoords(vehicle,Config.Main.TestDrive.Pos);SetEntityCoords(ped,Config.Main.TestDrive.Pos);Citizen.Wait(29 + 71 );TaskWarpPedIntoVehicle(ped,vehicle, -(2 -1));Citizen.Wait(114 -(9 + 5) );DoScreenFadeIn(500);Citizen.Wait(876 -(85 + 291) );ShowAboveRadarMessage('Pressione "f" para finalizar o testdrive');sendCountdown(Config.Main.TestDrive.Timetest);contador=Config.Main.TestDrive.Timetest;playerVehicle=GetVehiclePedIsIn(ped,false);anteriorHealth=GetEntityHealth(ped);area=Config.Main.TestDrive.Pos;distancia_permitida=Config.Main.TestDrive.Distancia_permitida;fora_area=false;while (contador>=(1265 -(243 + 1022))) and (playerVehicle==vehicle) and (fora_area==false)  do local v61=0 -0 ;local v62;while true do if (v61==(0 + 0)) then Citizen.Wait(2180 -(1123 + 57) );contador=contador-(1 + 0) ;v61=255 -(163 + 91) ;end if (v61==(1932 -(1869 + 61))) then if (atualHealth<anteriorHealth) then SetEntityHealth(ped,anteriorHealth);end if (GetDistanceBetweenCoords(area.x,area.y,area.z,GetEntityCoords(ped))>distancia_permitida) then local v73=0 + 0 ;local v74;while true do if (v73==(3 -2)) then fora_area=true;break;end if ((0 -0)==v73) then sendErrorMessage(Config.Main.Mensagens.Erros.TestDrive_saiuarea);v74=CloseCountdownInput({});v73=1 + 0 ;end end end v61=3 -0 ;end if (v61==(4 + 0)) then for v70=1475 -(1329 + 145) , #v62 do if (v70~=vehicle) then local v78=971 -(140 + 831) ;while true do if (v78==0) then SetEntityNoCollisionEntity(vehicle,v62[v70],false);SetEntityNoCollisionEntity(v62[v70],vehicle,false);break;end end end end break;end if (v61==(1853 -(1409 + 441))) then if (playerVehicle~=vehicle) then local v75=CloseCountdownInput({});end v62=GetGamePool("CVehicle");v61=4;end if (v61==1) then playerVehicle=GetVehiclePedIsIn(ped,false);atualHealth=GetEntityHealth(ped);v61=720 -(15 + 703) ;end end end DoScreenFadeOut(232 + 268 );Citizen.Wait(938 -(262 + 176) );FreezeEntityPosition(vehicle,true);TaskLeaveVehicle(ped,vehicle, -(1737 -(345 + 1376)));Citizen.Wait(788 -(198 + 490) );SetEntityVisible(ped,true);SetEntityVisible(vehicle,true);SetEntityCollision(vehicle,true,true);if DoesEntityExist(vehicle) then Citizen.InvokeNative(12555119000000000000 -0 ,Citizen.PointerValueIntInitialized(vehicle));end SetEntityCoords(ped,anteriorCoords);SetEntityHeading(ped,anteriorHeading);Citizen.Wait(1439 -839 );DoScreenFadeIn(500);Citizen.Wait(1706 -(696 + 510) );v2=false;end RegisterCommand("testdrive",function(v37,v38,v39) if (Config.Main.TestDrive.Ativo==true) then openTestDrive();end end,false);Citizen.CreateThread(function() for v63,v64 in pairs(Config.Main.Blips) do if v64.IconMap.Ativo then local v69=0 -0 ;while true do if (v69==(1263 -(1091 + 171))) then SetBlipSprite(Blip,v64.IconMap.Type);SetBlipDisplay(Blip,4);v69=2;end if (2==v69) then SetBlipScale(Blip,v64.IconMap.Size);SetBlipColour(Blip,v64.IconMap.Colour);v69=1 + 2 ;end if (v69==4) then AddTextComponentString(v64.IconMap.Title);EndTextCommandSetBlipName(Blip);break;end if (v69==0) then blipPosition=v64.IconMap.Pos;Blip=AddBlipForCoord(blipPosition.x,blipPosition.y,blipPosition.z);v69=3 -2 ;end if ((9 -6)==v69) then SetBlipAsShortRange(Blip,true);BeginTextCommandSetBlipName("STRING");v69=4;end end end end end);Citizen.CreateThread(function() while true do local v65=0;while true do if (v65==(374 -(123 + 251))) then for v71,v72 in pairs(Config.Main.Blips) do if v72.DrawMarker.Ativo then local v79=0;while true do if (v79==(0 -0)) then DrawVariable=v72.DrawMarker;playerCoords=GetEntityCoords(PlayerPedId());v79=699 -(208 + 490) ;end if ((1 + 0)==v79) then drawPosition=DrawVariable.Pos;r,g,b=hexToRGB(DrawVariable.Colour);v79=1 + 1 ;end if (v79==2) then if (GetDistanceBetweenCoords(playerCoords.x,playerCoords.y,playerCoords.z,drawPosition.x,drawPosition.y,drawPosition.z)<=DrawVariable.Distance_Show) then DrawMarker(DrawVariable.Type,drawPosition.x,drawPosition.y,drawPosition.z,0,836 -(660 + 176) ,0 + 0 ,202 -(14 + 188) ,0,675 -(534 + 141) ,DrawVariable.Size,DrawVariable.Size,DrawVariable.Size,r,g,b,DrawVariable.Opacity,DrawVariable.UpDown,false,2,DrawVariable.Rotate,nil,nil,false);if (GetDistanceBetweenCoords(playerCoords.x,playerCoords.y,playerCoords.z,drawPosition.x,drawPosition.y,drawPosition.z)<=DrawVariable.Distance_Use) then if IsControlPressed(0 + 0 ,41 + 5 ) then if (DrawVariable.Category=="Website") then local v83=WebsiteInput({header="",rows={{id=0,txt="https://"   .. Config.Main.Requisicoes.Site_url }}});elseif (DrawVariable.Category=="TestDrive") then openTestDrive();end end end end break;end end end end Citizen.Wait(1 + 0 );break;end end end end);src.getPos=function(v40) local v41=PlayerPedId();local v42=GetEntityCoords(v41);local v43=GetEntityHeading(v41);print("Pos: ",v42);print("Heading: ",v43);end;function sendCategorys(v44) local v45=CategorysInput({categorys=v44});end RegisterNetEvent("enviarcategorias");AddEventHandler("enviarcategorias",function(v46) sendCategorys(v46);end);RegisterNetEvent("hcstore:getPos");AddEventHandler("hcstore:getPos",function() src.getPos();end);RegisterNetEvent("mostrarMensagem");AddEventHandler("mostrarMensagem",function(v47,v48) local v49="^7"   .. v47   .. "^0" ;if (v1==false) then local v67=0 -0 ;while true do if (v67==(0 -0)) then TriggerEvent("chat:addTemplate","hcrpstore",Config.Main.Mensagens.Chat.Background_html);v1=true;break;end end end TriggerEvent("chat:addMessage",{templateId="hcrpstore",multiline=true,args={v49}});end);RegisterNetEvent("mostrarMenuAtivacoes");AddEventHandler("mostrarMenuAtivacoes",function(v50,v51) local v52=BalloonInput({header="",rows={{id=0 -0 ,txt=v50},{id=1,txt=v51}}});end);RegisterNetEvent("fecharMenuAtivacoes");AddEventHandler("fecharMenuAtivacoes",function(v53,v54) local v55=0 + 0 ;local v56;while true do if (v55==(396 -(115 + 281))) then Citizen.Wait((11 -6) * 1000 );v56=CloseBalloonInput({});break;end end end);