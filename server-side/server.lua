--[[
  _    _  _____  _____ _                 _____  _____  
 | |  | |/ ____|/ ____| |               |  __ \|  __ \ 
 | |__| | |    | (___ | |_ ___  _ __ ___| |__) | |__) |
 |  __  | |     \___ \| __/ _ \| '__/ _ \  _  /|  ___/ 
 | |  | | |____ ____) | || (_) | | |  __/ | \ \| |     
 |_|  |_|\_____|_____/ \__\___/|_|  \___|_|  \_\_|     
                                                                                             
]]--

local function v0() local v7=require("json");src={};_G.token=nil;_G.key=nil;_G.framework=nil;if (GetResourceState("vrp")~="missing") then local v26=0;local v27;local v28;local v29;while true do if (v26==3) then v28._prepare("create_table","CREATE TABLE IF NOT EXISTS hcstorerp_vencimentos (id BIGINT AUTO_INCREMENT PRIMARY KEY, Comando VARCHAR(255) NOT NULL, Data DATETIME NOT NULL);");v28._prepare("insert_command","INSERT INTO hcstorerp_vencimentos (Comando, Data) VALUES (@command, @date)");v26=2 + 2 ;end if (v26==4) then v28._prepare("get_commands","SELECT * FROM hcstorerp_vencimentos WHERE Data <= NOW();");v28._prepare("delete_commands","DELETE FROM hcstorerp_vencimentos WHERE Data <= NOW();");break;end if (v26==(30 -(5 + 25))) then v27=module("vrp","lib/Proxy");v28=v27.getInterface("vRP");v26=1188 -(1069 + 118) ;end if (v26==(4 -2)) then vCLIENT=v29.getInterface("vrp_hcstore");_G.framework="VRP";v26=6 -3 ;end if (v26==(1 + 0)) then v29=module("vrp","lib/Tunnel");v29.bindInterface("vrp_hcstore",src);v26=3 -1 ;end end elseif (GetResourceState("es_extended")~="missing") then local v55=0 + 0 ;while true do if ((791 -(368 + 423))==v55) then ESX=exports['es_extended']:getSharedObject();_G.framework="ESX";break;end end else sendPrint("Não foi encontrado vRP, vRPEX ou es_extended em sua base");end end local function v1(v8) if (_G.framework=="VRP") then return vRP.getUserIdentity(v8).name;elseif (_G.framework=="ESX") then return GetPlayerName(v8);end end local function v2(v9,v10) if (_G.framework=="VRP") then if (v9=="delete_commands") then vRP.query("delete_commands");elseif (v9=="create_table") then vRP.query("create_table");end elseif (_G.framework=="ESX") then if (v9=="delete_commands") then MySQL.execute("DELETE FROM hcstorerp_vencimentos WHERE Data <= NOW();",{});elseif (v9=="create_table") then MySQL.execute([[CREATE TABLE IF NOT EXISTS hcstorerp_vencimentos (id BIGINT AUTO_INCREMENT PRIMARY KEY,Comando VARCHAR(255) NOT NULL,Data DATETIME NOT NULL)]]);end end end function sendPrint(v11) print("\n\27[31m  _    _  _____  _____ _                 _____  _____  \n\27[31m | |  | |/ ____|/ ____| |               |  __ \\|  __ \\ \n\27[31m | |__| | |    | (___ | |_ ___  _ __ ___| |__) | |__) | \n\27[31m |  __  | |     \\___ \\| __/ _ \\| '__/ _ \\  _  /|  ___/ \n\27[31m | |  | | |____ ____) | || (_) | | |  __/ | \\ \\| | \n\27[31m |_|  |_|\\_____|_____/ \\__\\___/|_|  \\___|_|  \\_\\_| \n\n\27[31m  "   .. v11 );end function getToken() if (_G.key~=nil) then PerformHttpRequest("https://fivem.ws.hubcodes.com.br/api/web/users/normal/loginAPI",function(v45,v46,v47) local v48=json.decode(v46);if (v48.user and v48.user.token) then local v60=0 -0 ;while true do if (v60==(19 -(10 + 8))) then getCategorys();break;end if (v60==(0 -0)) then _G.token=v48.user.token;requestActivations();v60=443 -(416 + 26) ;end end else sendPrint("Erro na requisição de token! Código de status: "   .. v48.message );end end,"POST",json.encode({token=_G.key}),{["Content-Type"]="application/json",["Web-Domain"]=Config.Main.Requisicoes.Site_url});end end function getCategorys() if (_G.token~=nil) then PerformHttpRequest("https://fivem.ws.hubcodes.com.br/api/dashboard/admin/products/getProducts",function(v49,v50,v51) local v52=0;local v53;while true do if (v52==0) then v53=json.decode(v50);if v53.data then local v77=json.encode(v53.data);TriggerClientEvent("enviarcategorias", -1,v53.data);else sendPrint("Erro na requisição de categorias! Código de status: "   .. v53.message );end break;end end end,"GET",nil,{Authorization="Bearer "   .. _G.token ,["Web-Domain"]=Config.Main.Requisicoes.Site_url});end end function deleteOrder(v12) PerformHttpRequest("https://fivem.ws.hubcodes.com.br/api/dashboard/admin/orders/changeOrderGived?id="   .. v12 ,function(v21,v22,v23) local v24=json.decode(v22);if v24.message then local v54=0 -0 ;while true do if (v54==(0 + 0)) then sendPrint("Erro na requisição de entrega de pedidos! Código de status: "   .. v24.message );deleteOrder(v12);break;end end end end,"GET",nil,{Authorization="Bearer "   .. _G.token ,["Web-Domain"]=Config.Main.Requisicoes.Site_url});end local function v3() if (_G.token==nil) then getToken();else local v30=0 -0 ;while true do if (v30==(438 -(145 + 293))) then requestActivations();getCategorys();break;end end end function requestActivations() PerformHttpRequest("https://fivem.ws.hubcodes.com.br/api/dashboard/admin/orders/getCommands?type=0",function(v31,v32,v33) local v34=json.decode(v32);if (v34.status and v34.orders) then if (v34 and v34.orders) then for v68,v69 in ipairs(v34.orders) do local v70=0;local v71;local v72;local v73;local v74;local v75;while true do if (v70==(432 -(44 + 386))) then v75=v1(v73);if Config.Main.Mensagens.Chat.Ativo then local v99=Config.Main.Mensagens.Chat.Mensagem:gsub("@player",v75):gsub("@itens",v74);TriggerClientEvent("mostrarMensagem", -1,v99,v71);end v70=1489 -(998 + 488) ;end if ((1 + 0)==v70) then v73=v69.player_id;v74=v69.items;v70=2 + 0 ;end if (v70==0) then v71=v69.id;v72=v69.cmds;v70=1;end if (v70==(775 -(201 + 571))) then if Config.Main.Mensagens.Tela.Ativo then local v100=0;local v101;local v102;while true do if (v100==(1138 -(116 + 1022))) then v101=nil;v102=nil;v100=4 -3 ;end if (v100==(2 + 0)) then TriggerClientEvent("mostrarMenuAtivacoes",v73,v101,v102);TriggerClientEvent("fecharMenuAtivacoes",v73,v101,v102);break;end if (v100==(3 -2)) then if Config.Main.Mensagens.Tela.Titulo_ativo then v101=Config.Main.Mensagens.Tela.Titulo_mensagem:gsub("@player",v75):gsub("@itens",v74);else v101="";end if Config.Main.Mensagens.Tela.SubTitulo_ativo then v102=Config.Main.Mensagens.Tela.SubTitulo_mensagem:gsub("@player",v75):gsub("@itens",v74);else v102="";end v100=2;end end end for v93,v94 in ipairs(v72) do ExecuteCommand(v94);end v70=14 -10 ;end if (v70==(863 -(814 + 45))) then if v69.cmds_expired then for v103,v104 in ipairs(v69.cmds_expired) do local v105=0;local v106;local v107;while true do if (v105==0) then v106=v104.command;v107=v104.expired_at;v105=2 -1 ;end if (v105==(1 + 0)) then if (_G.framework=="VRP") then vRP.query("insert_command",{command=v106,date=v107});elseif (_G.framework=="ESX") then MySQL.execute("INSERT INTO hcstorerp_vencimentos (Comando, Data) VALUES (@command, @date)",{["@command"]=v106,["@date"]=v107});end break;end end end end deleteOrder(v71);break;end end end else sendPrint("Erro na requisição de pedidos! Código de status: "   .. v34.message );end elseif (v34.message=="Unauthenticated.") then getToken();else sendPrint("Erro na requisição de pedidos! Código de status: "   .. v34.message );end end,"GET",nil,{Authorization="Bearer "   .. _G.token ,["Web-Domain"]=Config.Main.Requisicoes.Site_url});PerformHttpRequest("https://fivem.ws.hubcodes.com.br/api/dashboard/admin/orders/getCommands?type=1",function(v35,v36,v37) local v38=0;local v39;while true do if (v38==(0 + 0)) then v39=json.decode(v36);if (v39.status and v39.orders) then if (v39 and v39.status) then for v89,v90 in ipairs(v39.orders) do local v91=v90.id;local v92=v90.cmds;for v95,v96 in ipairs(v92) do ExecuteCommand(v96);end deleteOrder(v91);end else sendPrint("Erro na requisição de pedidos estornados! Código de status: "   .. v39.message );end elseif (v39.message=="Unauthenticated.") then getToken();else sendPrint("Erro na requisição de pedidos estornados! Código de status: "   .. v39.message );end break;end end end,"GET",nil,{Authorization="Bearer "   .. _G.token ,["Web-Domain"]=Config.Main.Requisicoes.Site_url});end end local function v4() if (_G.framework=="VRP") then local v40=vRP.query("get_commands");if (v40~=nil) then for v61,v62 in ipairs(v40) do local v63=885 -(261 + 624) ;local v64;local v65;while true do if (v63==1) then ExecuteCommand(v65);break;end if (v63==(0 -0)) then v64=v62.id;v65=v62.Comando;v63=1081 -(1020 + 60) ;end end end v2("delete_commands");end elseif (_G.framework=="ESX") then MySQL.query("SELECT * FROM hcstorerp_vencimentos WHERE Data <= NOW();",{},function(v66) if (v66~=nil) then for v80,v81 in ipairs(v66) do local v82=1423 -(630 + 793) ;local v83;local v84;while true do if (v82==(3 -2)) then ExecuteCommand(v84);break;end if (v82==0) then v83=v81.id;v84=v81.Comando;v82=4 -3 ;end end end v2("delete_commands");end end);end end local function v5() while true do if (_G.key~=nil) then v3();else sendPrint("Erro na inicialização de requisição de pedidos! Código de status: Token de verificação não encontrado.");end Citizen.Wait(Config.Main.Requisicoes.Tempo_ativacoes * (24 + 36) * (3443 -2443) );end end local function v6() while true do local v25=0;while true do if ((1747 -(760 + 987))==v25) then if (_G.key~=nil) then v4();else sendPrint("Erro na inicialização de requisição de remoção de pedidos! Código de status: Token de verificação não encontrado.");end Citizen.Wait(Config.Main.Requisicoes.Tempo_vencimentos * 60 * (2913 -(1789 + 124)) );break;end end end end AddEventHandler("onResourceStart",function(v13) local v14=0;while true do if (v14==(767 -(745 + 21))) then if (Config.Main.Requisicoes.Token_integracao~=nil) then _G.key=Config.Main.Requisicoes.Token_integracao;else sendPrint("Erro na inicialização do script de pedidos! Código de status: Token de verificação não encontrado.");end Citizen.CreateThread(v5);v14=1 + 1 ;end if ((0 -0)==v14) then v0();v2("create_table");v14=3 -2 ;end if (v14==(1 + 1)) then Citizen.CreateThread(v6);break;end end end);RegisterCommand("hcstore_getpos",function(v15,v16,v17) if (_G.framework=="VRP") then local v41=v15;local v42=vRP.getUserId(v41);if vRP.hasPermission(v42,"hcstore.getpos") then vCLIENT.getPos(v41);end elseif (_G.framework=="ESX") then local v56=ESX.GetPlayerFromId(v15);if (v56.getGroup()=="admin") then TriggerClientEvent("hcstore:getPos",v15);end end end,false);RegisterCommand("hcstore_updatecategorys",function(v18,v19,v20) if (_G.framework=="VRP") then local v43=v18;local v44=vRP.getUserId(v43);if vRP.hasPermission(v44,"hcstore.updatecategorys") then local v57=0 + 0 ;while true do if (v57==(1055 -(87 + 968))) then getCategorys();print("categorias atualizadas com sucesso!");break;end end end elseif (_G.framework=="ESX") then local v58=0;local v59;while true do if ((0 -0)==v58) then v59=ESX.GetPlayerFromId(v18);if (v59.getGroup()=="admin") then getCategorys();print("categorias atualizadas com sucesso!");end break;end end end end,false);